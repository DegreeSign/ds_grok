/*! For license information please see degreesign.node.min.js.LICENSE.txt */
(()=>{"use strict";var e={109(e,o){Object.defineProperty(o,"__esModule",{value:!0}),o.grokSourcesStatement=o.GROK_SETUP=o.GROK_PRICING_DATA=o.GROK_PRICING_UNIT=o.GROK_BASE_URL=void 0;o.GROK_BASE_URL="https://api.x.ai/v1/",o.GROK_PRICING_UNIT=1e6,o.GROK_PRICING_DATA={"grok-code-fast-1":{prompt:.2,cached:.02,completion:1.5},"grok-4-0709":{prompt:3,cached:.75,completion:15},"grok-3":{prompt:3,cached:.75,completion:15},"grok-3-mini":{prompt:.3,cached:.075,completion:.5},"grok-2-image-1212":{images:!0,prompt:0,cached:0,completion:.07}},o.grokSourcesStatement=e=>`The response should include all sources (link and page title heading) used in an array, such that it is \n{\n${e}\nsources:{link:string;pageTitle:string}[];\n}\nThe final response should be a valid stringified JSON object.`,o.GROK_SETUP='**Do not include in your response:**\n* a title\n* words count\n* information about yourself\n* unknowns such as $X number.\n* anything about or refer to this prompt\n* repeated sentence starters such as "A recent fact" or "General sentiment"\n* bullet points or any other formatting that violates JSON object\n\n**Do:**\n* edit ruthlessly to remove redundant phrases or ideas\n* respond with a valid JSON object\n'},173(e,o,t){Object.defineProperty(o,"__esModule",{value:!0}),o.grokAI=void 0;const r=t(109),n=e=>"The JSON response object should follow this TS interface. \ninterface ResponseType {\n"+e.map(e=>`${e.dataKeyName}: ${e.type}; // ${e.requiredData}\n`)+"};\n"+(0,r.grokSourcesStatement)("data:ResponseType;");o.grokAI=async({apiKey:e,responseType:o,prompt:t,model:s})=>{try{const a="image"==o&&"string"==typeof t,i="json"==o&&"string"!=typeof t;s=s||(a?"grok-2-image-1212":"grok-3-mini");performance.now();const c=a?{model:s,prompt:t,response_format:"url",n:1}:i?{messages:[{role:"system",content:r.GROK_SETUP},{role:"user",content:n(t)}],model:s,stream:!1,temperature:"json"==o?.3:.7}:void 0,p=a?"images/generations":"chat/completions",l=e&&c?await fetch(`${r.GROK_BASE_URL}${p}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(c)}):void 0,d=await(l?.json()),u=d?.error?{code:d?.code,error:d?.error}:{data:d,error:void 0};if(null!=u?.error)return console.log("aiData error",u?.error),{success:!1,error:u?.error};{let e=0,o="";if("choices"in u?.data){e=(({usage:e,model:o})=>{try{const t=r.GROK_PRICING_DATA[o],{prompt_tokens:n,prompt_tokens_details:{cached_tokens:s},total_tokens:a}=e||{prompt_tokens_details:{}},i=a-n,c=n*t.prompt;return(c+s*t.cached+i*t.completion)/r.GROK_PRICING_UNIT}catch(e){console.log("calculateGrokCost failed",e)}})({usage:u?.data?.usage,model:s})||0;const t=u?.data?.choices?.[0]?.message?.content;o=JSON.parse(t)}else if(a){const t=u?.data?.data?.[0];e=.07,o=t?.url||t?.b64_json||""}return o||console.log("aiData issue",u),{success:!0,response:o,costUSD:e.toFixed(2),seconds:(performance.now(),2).toFixed(2)}}}catch(e){return console.log("aiData failed",e),{success:!1,error:""}}}}},o={};function t(r){var n=o[r];if(void 0!==n)return n.exports;var s=o[r]={exports:{}};return e[r](s,s.exports,t),s.exports}var r={};(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.grokAI=void 0;const o=t(173);Object.defineProperty(e,"grokAI",{enumerable:!0,get:function(){return o.grokAI}})})();var n=exports;for(var s in r)n[s]=r[s];r.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();